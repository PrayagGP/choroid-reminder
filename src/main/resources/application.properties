# Application Configuration
spring.application.name=Choroid-Reminder-Service
server.port=${SERVER_PORT:8083}
server.address=0.0.0.0

# Database Configuration - Using pure JDBC like auth service
spring.datasource.url=${DB_URL:jdbc:mysql://localhost:3307/choroid_db}
spring.datasource.username=${DB_USERNAME:root}
spring.datasource.password=${DB_PASSWORD:apdddbs19}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JDBC Configuration
# Using pure JDBC - no JPA/Hibernate configuration needed

# Email Configuration (Gmail SMTP)
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME:your-email@gmail.com}
spring.mail.password=${MAIL_PASSWORD:your-app-password}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com

# Reminder Configuration
reminder.from-email=${REMINDER_FROM_EMAIL:noreply@choroid.com}
reminder.from-name=${REMINDER_FROM_NAME:Choroid Session System}

# Scheduler Configuration
reminder.scheduler.enabled=${SCHEDULER_ENABLED:true}
reminder.scheduler.session-check-interval=${SESSION_CHECK_INTERVAL:300000}
reminder.scheduler.cleanup-interval=${CLEANUP_INTERVAL:3600000}

# External API Configuration - PLACEHOLDER ENDPOINTS
# TODO: Replace these with actual gateway/microservice endpoints
api.gateway.base-url=${GATEWAY_BASE_URL:http://localhost:8080/api}

# UPDATED 4-ENDPOINT DESIGN:
# 1. Get upcoming sessions (starting within ~30-35 minutes) from Sessions table
api.session.get-upcoming-sessions=${SESSION_API_UPCOMING:/gateway/sessions/upcoming}

# 2. Get recently completed sessions (ended within ~30-60 minutes) from Sessions table
api.session.get-completed-sessions=${SESSION_API_COMPLETED:/gateway/sessions/completed}

# 3. Get registered UserIDs from RARF table using SessionID
api.rarf.get-registered-users=${RARF_API_USERS:/gateway/rarf/users/{sessionID}}

# 4. Get user details (especially PersonalEmail) from Users table using list of UserIDs
api.user.get-users-by-ids=${USER_API_BY_IDS:/gateway/users/batch}

# Reminder Timing Configuration (in minutes)
reminder.before-session.first=${REMINDER_BEFORE_FIRST:30}
reminder.after-session.feedback=${REMINDER_AFTER_FEEDBACK:30}

# Logging Configuration
logging.level.com.ddbs.choroid_reminder_service=${LOG_LEVEL:INFO}
logging.level.org.springframework.mail=${MAIL_LOG_LEVEL:WARN}
logging.level.org.springframework.scheduling=${SCHEDULER_LOG_LEVEL:INFO}
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Actuator for health checks
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always