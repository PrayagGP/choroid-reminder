# Application Configuration
spring.application.name=Choroid-Reminder-Service
server.port=${SERVER_PORT:8083}
server.address=0.0.0.0

# Database Configuration - Using pure JDBC like auth service
spring.datasource.url=${DB_URL:jdbc:mysql://localhost:3307/choroid_db}
spring.datasource.username=${DB_USERNAME:root}
spring.datasource.password=${DB_PASSWORD:apdddbs19}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JDBC Configuration
# Using pure JDBC - no JPA/Hibernate configuration needed

# Email Configuration (Gmail SMTP)
spring.mail.host=${MAIL_HOST:smtp.gmail.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=prayag.inbox@gmail.com
spring.mail.password=ylhx gyud eqyn okqb
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com

# Reminder Configuration
reminder.from-email=${REMINDER_FROM_EMAIL:noreply@choroid.com}
reminder.from-name=${REMINDER_FROM_NAME:Choroid Session System}

# Scheduler Configuration
reminder.scheduler.enabled=${SCHEDULER_ENABLED:true}
reminder.scheduler.session-check-interval=${SESSION_CHECK_INTERVAL:300000}
reminder.scheduler.cleanup-interval=${CLEANUP_INTERVAL:3600000}

# External API Configuration - ACTUAL GATEWAY ENDPOINTS
api.gateway.base-url=${GATEWAY_BASE_URL:http://25.7.141.58:8100}

# UPDATED 3-ENDPOINT DESIGN:
# 1. Search sessions endpoint - POST request with criteria in request body
# Used for both upcoming sessions and completed sessions
api.session.search=${SESSION_API_SEARCH:/choroid/sessions/search}

# 2. Get all RARF records for a specific session (returns usernames of attendees)
api.rarf.get-session-records=${RARF_API_SESSION:/choroid/rarf/session/{sessionId}/all}

# 3. Get user email by username (for sending reminders)
api.user.find-email-by-username=${USER_API_FIND_EMAIL:/users/api/findemail/{username}}

# Reminder Timing Configuration (in minutes)
reminder.before-session.first=${REMINDER_BEFORE_FIRST:30}
reminder.after-session.feedback=${REMINDER_AFTER_FEEDBACK:30}

# Logging Configuration
logging.level.com.ddbs.choroid_reminder_service=${LOG_LEVEL:INFO}
logging.level.org.springframework.mail=${MAIL_LOG_LEVEL:WARN}
logging.level.org.springframework.scheduling=${SCHEDULER_LOG_LEVEL:INFO}
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# Actuator for health checks
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always